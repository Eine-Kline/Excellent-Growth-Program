import cv2
import numpy as np

# 相机1内参
left_camera_matrix = np.array([[402.341932124713, 0., 326.114639187132],
                                [0., 402.667735030837, 232.494795708488],
                                [0., 0., 1.0000]])
# 相机1畸变参数
left_distortion = np.array([[-0.398906758409918, 0.204004605635836, -0.000293602477192985, -0.000571296837368212, -0.0557381638277628]])

# 相机2内参
right_camera_matrix = np.array([[402.341932124713, 0., 326.114639187132],
                               [0., 402.667735030837, 232.494795708488],
                               [0., 0., 1.0000]])

# 相机2畸变参数
right_distortion = np.array([[-0.40019576754904, 0.207233784287733, -0.000125579538886151, 0.00104688630485322, -0.0579188107056627]])

# 平移矩阵
T = np.array([-125.711106451191, 0.0309264780520607, 0.57624343712051])

# 旋转矩阵
R = np.matrix([
    [0.999996259504644, 0.0010119895669098, 0.00254103400959184],
    [-0.00102701577218632, 0.99998195460487, 0.00591909648733603],
    [-0.00253499809173837, -0.00592168402898862, 0.999979253506259],
])



size = (640, 480) # 图像尺寸

# 进行立体更正
R1, R2, P1, P2, Q, validPixROI1, validPixROI2 = cv2.stereoRectify(left_camera_matrix, left_distortion,
                                                                  right_camera_matrix, right_distortion, size, R,
                                                                  T)
print("complete")

